---
import ProjectCard from "./project-card.astro";
import { asString, Column, Object, Spreadsheet } from "sheethuahua";

const schema = Object({
  creatorName: Column("Name", asString().optional("")),
  creatorRole: Column("Role", asString().optional("")),
  projectName: Column("Project Name", asString().optional("")),
  outputType: Column("Output Type", asString().optional("")),
  description: Column("Project Description", asString().optional("")),
  projectUrl: Column("URL", asString().optional()),
  q1: Column("ทำไมเลือกทำเรื่องนี้", asString().optional("-")),
  q2: Column(
    "อะไรในงานนี้ที่ตัวเองไม่เคยทำมาก่อนในชีวิตการทำงานปกติ",
    asString().optional("-"),
  ),
  q3: Column("ได้ลองแล้วรู้สึกยังไง", asString().optional("-")),
});

const projects = await Spreadsheet(
  "1A2O_Tz8pZPfJ_QqsPFX0DbosoXcSEGAahPAj-EM5fjc",
).get("Sheet1", schema);

const maxProjectPerColumn = Math.ceil(projects.length / 2);
---

<section class="bg-black">
  <div class="justify-center flex flex-col py-4 md:py-8 gap-4 md:gap-8">
    <h2 class="text-h2 text-center text-green-2 font-bold">8 PROJECTS</h2>

    <div class="grid md:grid-cols-2 gap-3">
      <div class="flex flex-col gap-3">
        {
          projects
            .slice(0, maxProjectPerColumn)
            .map((project) => (
              <ProjectCard
                {...project}
                projectImage="https://placehold.co/800x400"
                creatorImage="https://placehold.co/100x100"
              />
            ))
        }
      </div>
      <div class="flex flex-col gap-3">
        {
          projects
            .slice(maxProjectPerColumn)
            .map((project) => (
              <ProjectCard
                {...project}
                projectImage="https://placehold.co/800x400"
                creatorImage="https://placehold.co/100x100"
              />
            ))
        }
      </div>
    </div>
  </div>
</section>
